:root{ --bg:#0b0f14; --panel:#0e131a; --fg:#e5e7eb; --muted:#b7c0cd; --border:#1f2430;
       --blue:#60a5fa; --green:#34d399; --amber:#f59e0b; --red:#ef4444; --violet:#a78bfa; 
       --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", 
               Roboto, "Helvetica Neue", Arial, sans-serif; }
  *{box-sizing:border-box} html,body{height:auto;} body{margin:0;background:var(--bg);color:var(--fg);font:13px/1.45 var(--font-sans);overflow-y:auto}
       .nav{position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;align-items:center;background:#0a0e13;border-bottom:1px solid var(--border);padding:8px 12px}
       .tabs{display:flex;gap:8px;padding:8px 12px;border-bottom:1px solid var(--border);background:#0a0e13}
       .tab{padding:6px 12px;border-radius:8px;border:1px solid var(--border);background:#0f1520;color:var(--muted);cursor:pointer;user-select:none}
       .tab.active{background:#111827;color:var(--fg)}
       .chips{display:flex;gap:8px;flex-wrap:wrap;padding:8px 12px;border-bottom:1px solid var(--border);background:#0a0e13}
       .chip{display:flex;gap:8px;align-items:center;background:#0f1520;border:1px solid var(--border);color:var(--muted);padding:6px 10px;border-radius:12px}
       .chip select,.chip input{background:#0b1220;border:1px solid #263041;color:#e8edf4;outline:none;border-radius:8px;padding:6px 28px 6px 10px;font-size:13px;appearance:none;position:relative}
       .chip select{background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="%23b7c0cd"><path d="M7 10l5 5 5-5z"/></svg>');background-repeat:no-repeat;background-position:right 8px center}
       .chip input{min-width:140px}
       .chip label{opacity:.9}
       .page {
         display: none;
           opacity: 0;
             transition: opacity 0.3s ease-in-out;
             }
             .page.active {
               display: block;
                 opacity: 1;
                 }

                 .status{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;border-bottom:1px solid var(--border);background:#0a0e13;color:var(--muted);font-size:12px}
                 .badges-container{display:flex;gap:16px;align-items:center;}
                 .chart-controls{display:flex;gap:8px;}
                 .badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:2px 8px}
                 .connection-badge {padding: 4px 12px;}
                 .conn-icons {display:flex;align-items:center;gap:12px;margin-right:6px;}
                 .conn-icon {display:flex;align-items:center;gap:3px;font-weight:500;}
                 .dot{width:8px;height:8px;border-radius:50%;position:relative;}
                 .dot.ok{background:#16a34a;box-shadow:0 0 5px rgba(22, 163, 74, 0.5);}
                 .dot.fail{background:#ef4444;box-shadow:0 0 5px rgba(239, 68, 68, 0.5);}
                 .dot.warn{background:#f59e0b;box-shadow:0 0 5px rgba(245, 158, 11, 0.5);}

                 .clear-btn {
                   display: flex;
                     align-items: center;
                       gap: 6px;
                         background-color: #1a2235; 
                           color: #e5e7eb;
                             border: 1px solid #2d3748;
                               padding: 5px 10px;
                                 border-radius: 6px;
                                   font-size: 12px;
                                     font-weight: 500;
                                       transition: all 0.2s ease;
                                       }

                                       .clear-btn:hover {
                                         background-color: #2d3748;
                                           border-color: #4a5568;
                                           }

                                           .grid {
                                             padding: 12px;
                                               display: grid;
                                                 gap: 12px;
                                                   max-width: 1600px;
                                                     margin: 0 auto;
                                                       /* Üst sıra oranları (device / speed / gauge) */
                                                       grid-template-columns: 0.9fr 1.5fr 1.1fr;
                                                         grid-auto-rows: auto;
                               grid-template-areas:
                                 "kpis kpis kpis"
                                 "device speed gauge"
                                 "rpm engine gps"
                                 "pressure engine gps";
                                                                               }
                                                                               .panel {
                                                                                 background: var(--panel);
                                                                                   border: 1px solid var(--border);
                                                                                     border-radius: 10px;
                                                                                       min-height: 120px;
                                                                                         display: flex;
                                                                                           flex-direction: column;
                                                                                             overflow: hidden;
                                                                                               box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                                                                                                 transition: transform 0.2s ease-in-out;
                                                                                                 }

                                                                                                 .panel:hover {
                                                                                                   transform: translateY(-1px);
                                                                                                     box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
                                                                                                     }
                                                                                                     .ph{display:flex;justify-content:space-between;align-items:center;color:#9fb0c4;border-bottom:1px solid var(--border);padding:8px 10px}
                                                                                                     .pb{
                                                                                                       padding: 10px;
                                                                                                         flex: 1;
                                                                                                           display: flex;
                                                                                                             flex-direction: column;
                                                                                                             }

                                                                                                             .kpis{grid-area:kpis} 
                                                                                                            .device{grid-area:device;min-height:220px;display:flex;flex-direction:column}
                                                                                                             .speed{grid-area:speed} 
                                                                                                             .gauge{grid-area:gauge}
                                                                                                             .rpm{grid-area:rpm}
                                                                                                             .engine{grid-area:engine;min-height:200px;display:flex;flex-direction:column}
                                                                                                             .gps{grid-area:gps;min-height:300px} 
                                                                                                             .fuelrate{grid-area:fuelrate}
                                                                                                             /* temps panel removed */
                                                                                                            .nav-wrapper{position:relative;width:100%;height:100%;min-height:240px;display:flex;align-items:center;justify-content:center;padding:4px}
                                                                                                            #navMap{width:100%;height:100%;display:block;object-fit:cover;border-radius:8px;background:#111a24;min-height:320px}
                                                                                                             .pressure{grid-area:pressure} 
                                                                                                             .fuelrate{grid-area:fuelrate}
                                                                                                             /* tempGauges removed: merged into temps */

                                                                                                             .kpi-wrap{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
                                                                                                             .kpi{background:#132031;border:1px solid #1e2936;border-radius:8px;padding:10px;display:flex;flex-direction:column;justify-content:center;position:relative;overflow:hidden;transition:background .3s,border-color .3s,box-shadow .3s}
                                                                                                             .kpi:before{content:"";position:absolute;inset:0;opacity:.15;pointer-events:none;background:radial-gradient(circle at 65% 15%,rgba(255,255,255,.25),transparent 70%)}
                                                                                                             .kpi .lbl{color:#93a2b7;font-size:11px;text-transform:uppercase;letter-spacing:.6px;font-weight:600;margin-bottom:2px}
                                                                                                             .kpi .val{font-size:30px;font-weight:600;line-height:1.1;color:#f2f5f8;text-shadow:0 1px 2px rgba(0,0,0,.4)}
                                                                                                             .kpi-speed{--accent:#15803d}
                                                                                                             .kpi-distance{--accent:#1d4ed8}
                                                                                                             .kpi-operation{--accent:#7e22ce}
                                                                                                             .kpi-fuelrate{--accent:#b45309}
                                                                                                             .kpi-eco{--accent:#0f766e}
                                                                                                             .kpi{box-shadow:0 0 0 1px rgba(255,255,255,.02),0 2px 4px -1px rgba(0,0,0,.4)}
                                                                                                             .kpi:hover{box-shadow:0 0 0 1px rgba(255,255,255,.05),0 4px 14px -2px rgba(0,0,0,.55)}
                                                                                                             .kpi[data-trend="up"]{background:linear-gradient(135deg,var(--accent)22%,#0d1622 90%);}
                                                                                                             .kpi[data-trend="down"]{background:linear-gradient(135deg,#4b5563 10%,#0d1622 90%);} 
                                                                                                             .kpi[data-trend]{border-color:rgba(255,255,255,.08)}

                                                                                                             canvas{display:block;width:100%;height:260px;border-radius:8px} .small{height:240px}
                                                                                                             .legend{display:flex;gap:10px;color:#9fb0c4;font-size:12px;margin-bottom:6px}
                                                                                                             .legend .it{display:flex;gap:6px;align-items:center;border:1px solid var(--border);background:#0f1520;border-radius:999px;padding:2px 8px}
                                                                                                             .sw{width:10px;height:10px;border-radius:2px}

                                                                                                             .viewer {
                                                                                                               position: relative;
                                                                                                               }
                                                                                                               .viewer .pb {
                                                                                                                 padding: 0;
                                                                                                                   height: 100%;
                                                                                                                     overflow: hidden;
                                                                                                                     }
                                                                                                                     #vehicleHost {
                                                                                                                       height: 320px;
                                                                                                                         width: 100%;
                                                                                                                           position: relative;
                                                                                                                           }
                                                                                                                           #vehicleCanvas {
                                                                                                                             width: 100%;
                                                                                                                               height: 100%;
                                                                                                                                 display: block;
                                                                                                                                   z-index: 1;
                                                                                                                                   }
                                                                                                                                   .viewer .notice{
                                                                                                                                     color:#9fb0c4;
                                                                                                                                       font-size:12px;
                                                                                                                                         padding:10px;
                                                                                                                                           position: absolute;
                                                                                                                                             top: 50%;
                                                                                                                                               left: 50%;
                                                                                                                                                 transform: translate(-50%, -50%);
                                                                                                                                                   z-index: 2;
                                                                                                                                                     background-color: rgba(14, 19, 26, 0.8);
                                                                                                                                                       border-radius: 6px;
                                                                                                                                                         text-align: center;
                                                                                                                                                           width: auto;
                                                                                                                                                             backdrop-filter: blur(4px);
                                                                                                                                                             }

                                                                                                                                                            /* Engine Parameters yeni tasarım */
                                                                                                                                                            .engine-params .pb{padding:14px;display:flex;flex:1 1 auto}
                                                                                                                                                            .eng-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:18px;width:100%;align-items:stretch}
                                                                                                                                                            .eng-card{position:relative;background:#121923;border:1px solid #1d2733;border-radius:10px;padding:12px 12px 50px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;overflow:hidden;box-shadow:0 2px 4px -1px rgba(0,0,0,.4);transition:background .3s,border-color .3s,transform .25s;min-height:210px}
                                                                                                                                                            .eng-card:before{content:"";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 70% 18%,rgba(255,255,255,.12),transparent 65%);opacity:.5}
                                                                                                                                                            .eng-card:hover{border-color:#2a3645;background:#142131;transform:translateY(-2px)}
                                                                                                                                                            .eng-hd{font-size:12px;letter-spacing:.5px;text-transform:uppercase;color:#93a2b7;font-weight:600;margin-bottom:6px;text-align:center}
                                                                                                                                                            .eng-card canvas{width:100%;aspect-ratio:1/1;max-width:150px;max-height:150px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.6))}
                                                                                                                                                            .engine-params .eng-card canvas{height:150px}
                                                                                                                                                            .eng-val{position:absolute;bottom:8px;left:0;right:0;text-align:center;font-size:19px;font-weight:600;color:#f2f5f8;text-shadow:0 1px 2px rgba(0,0,0,.6);pointer-events:none}
                                                                                                                                                            /* Engine value alignment fix */
                                                                                                                                                            .eng-card .eng-val{line-height:1.1;letter-spacing:.3px}

                                                                                                                                                            @media (max-width:900px){
                                                                                                                                                              .eng-grid{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:14px}
                                                                                                                                                              .eng-card{padding:8px 8px 40px}
                                                                                                                                                              .eng-card canvas{max-width:140px;max-height:140px}
                                                                                                                                                              .eng-val{font-size:16px}
                                                                                                                                                            }

                                                                                                                                                             .feed{max-width:1200px;margin:12px auto;padding:12px}
                                                                                                                                                             .feed .toolbar{display:flex;gap:8px;margin-bottom:8px}
                                                                                                                                                             .btn{background:#0f1520;border:1px solid var(--border);border-radius:8px;color:var(--fg);padding:6px 10px;cursor:pointer}
                                                                                                                                                             .feed .row{display:grid;grid-template-columns:120px 280px 1fr;gap:12px;align-items:start;border-bottom:1px dashed var(--border);padding:10px 6px}
                                                                                                                                                             .feed .topic{color:#93c5fd}
                                                                                                                                                             .json{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px}
                                                                                                                                                             .jrow{line-height:1.5}
                                                                                                                                                             .jk{color:#93c5fd}
                                                                                                                                                             .jv-num{color:#f59e0b}
                                                                                                                                                             .jv-str{color:#34d399}
                                                                                                                                                             .jv-bool{color:#a78bfa}
                                                                                                                                                             .jv-null{color:#9aa4b2}
                                                                                                                                                             .fold{cursor:pointer;user-select:none;color:#9aa4b2}
                                                                                                                                                             .fn{display:inline-block;width:10px;text-align:center}

                                                                                                                                                                                                       .gauge canvas, .temps canvas {
                                                                                                                                                                                                         background: transparent;
                                                                                                                                                                                                           border-radius: 8px;
                                                                                                                                                                                                           }

                                                                                                                                                                                                      /* Device (3D) panel iç ölçekleme */
                                                                                                                                                                                                      .device-host{position:relative;width:100%;height:100%;min-height:220px;display:flex;align-items:center;justify-content:center;padding:4px}
                                                                                                                                                                                                      .device-canvas{width:100%;height:100%;display:block;object-fit:contain;aspect-ratio:4/3}

                                                                                                                                                                                                      /* Fuel panel adaptif ve taşma engelli yapı */
                                                                                                                                                                                                      .panel.gauge{overflow:hidden}
                                                                                                                                                                                                      .fuel-flex{display:flex;gap:18px;height:100%;align-items:center;justify-content:space-between;padding:4px 2px}
                                                                                                                                                                                                      .fuel-gauge{flex:0 0 clamp(180px,32%,260px);display:flex;align-items:center;justify-content:center;max-height:100%}
                                                                                                                                                                                                      .fuel-gauge canvas{width:100%;height:auto;aspect-ratio:1/1;max-height:280px;object-fit:contain}
                                                                                                                                                                                                      .fuel-rate{flex:1;min-width:200px;display:flex;align-items:stretch}
                                                                                                                                                                                                      .fuel-rate canvas{width:100%;height:100%;min-height:190px;max-height:100%;object-fit:contain}

                                                                                                                                                                                                      /* Panel yükseklik harmonisi */
                                                                                                                                                                                                      .panel.device .pb, .panel.speed .pb, .panel.gauge .pb{padding:14px}
                                                                                                                                                                                                      /* Üst satır panelleri yüksekliği */
                                                                                                                                                                                                      .panel.device, .panel.speed, .panel.gauge {min-height:clamp(200px,24vh,320px); max-height:340px;}
                                                                                                                                                                                                      .panel.speed canvas, .panel.gauge canvas{height:100%;min-height:210px;max-height:100%;}
                                                                                                                                                                                                      /* Sekme geçişinde yüksekliğin sıçramasını engellemek için sabit iç yükseklik referansları */
                                                                                                                                                                                                      .panel.device .pb, .panel.speed .pb, .panel.gauge .pb{display:flex;flex-direction:column;justify-content:stretch}
                                                                                                                                                                                                      .panel.speed .pb > canvas, .panel.gauge .pb > canvas{flex:1 1 auto}

                                                                                                                                                                                                      @media (max-width:1480px){
                                                                                                                                                                                                        .grid{grid-template-columns:1.1fr 1.4fr 1.1fr}
                                                                                                                                                                                                      }
                                                                                                                                                                                                      @media (max-width:1320px){
                                                                                                                                                                                                         .grid{grid-template-columns:1fr 1fr;grid-template-areas:
                                                                                                                                                                                                           "kpis kpis"
                                                                                                                                                                                                           "device gauge"
                                                                                                                                                                                                           "speed speed"
                                                                                                                                                                                                           "rpm engine"
                                                                                                                                                                                                           "pressure engine"
                                                                                                                                                                                                           "gps gps";}
                                                                                                                                                                                                        .panel.device, .panel.speed, .panel.gauge {min-height:clamp(240px,34vh,360px)}
                                                                                                                                                                                                        .fuel-gauge{flex:0 0 clamp(200px,32%,280px)}
                                                                                                                                                                                                      }

                                                                                                                                                                                                      @media (max-width:1000px){
                                                                                                                                                                                                        .grid{grid-template-columns:1fr;grid-template-areas:
                                                                                                                                                                                                          "kpis"
                                                                                                                                                                                                          "device"
                                                                                                                                                                                                          "speed"
                                                                                                                                                                                                          "gauge"
                                                                                                                                                                                                          "rpm"
                                                                                                                                                                                                          "engine"
                                                                                                                                                                                                          "pressure"
                                                                                                                                                                                                          "fuelrate"
                                                                                                                                                                                                          "gps";}
                                                                                                                                                                                                        .fuel-flex{flex-direction:column}
                                                                                                                                                                                                        .fuel-gauge{flex:0 0 auto;width:100%;max-width:none}
                                                                                                                                                                                                        .panel.device, .panel.speed, .panel.gauge {min-height:300px}
                                                                                                                                                                                                      }
